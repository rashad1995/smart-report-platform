<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±ÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #f4f7f6; margin: 0; display: flex; }
        .sidebar { width: 300px; background: #1e293b; color: white; height: 100vh; padding: 20px; position: fixed; }
        .main-content { margin-right: 340px; padding: 40px; width: 100%; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .btn { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; width: 100%; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ddd; }
        #report-box { white-space: pre-wrap; line-height: 1.8; color: #2d3436; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ</h2>
        <hr>
        <label>ğŸ“‚ Ø§Ø±ÙØ¹ ÙˆØ«ÙŠÙ‚ØªÙƒ</label>
        <input type="file" id="fileInput">
        <label>Ù‡ÙŠÙƒÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</label>
        <select id="structure">
            <option>Ø´Ø§Ù…Ù„</option>
            <option>Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ</option>
            <option>ØªØ­Ù„ÙŠÙ„ ØªÙ‚Ù†ÙŠ</option>
        </select>
        <button class="btn" onclick="startAnalysis()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ</button>
    </div>

    <div class="main-content">
        <h1>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ</h1>
        <div class="card" id="result-card" style="display:none;">
            <div id="report-box"></div>
        </div>
    </div>

    <script>
        async function startAnalysis() {
            const file = document.getElementById('fileInput').files[0];
            const structure = document.getElementById('structure').value;
            if(!file) { alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹"); return; }

            const formData = new FormData();
            formData.append('file', file);
            formData.append('structure', structure);

            document.getElementById('result-card').style.display = 'block';
            document.getElementById('report-box').innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±";

            const res = await fetch('/analyze', { method: 'POST', body: formData });
            const data = await res.json();
            document.getElementById('report-box').innerHTML = data.report;
        }
    </script>
</body>
</html>
